<!doctype html>

<html>

<head>
    <meta charset="utf-8">
    <title>PEWI Workspace</title>

    <link rel="stylesheet" type="text/css" href="stylesheet.css">
    <link rel='shortcut icon' href='./imgs/pewi_favicon.ico' type='image/x-icon'/ >

    <!-- three.js framework libraries -->     
    <script src="./lib/d3.min.js"></script>
    <script src="./lib/three.min.js"></script>
    <script src="./lib/controls.js"></script>
    <script src="./lib/jquery-1.12.4.min.js"></script>
    <script src="./lib/stats.min.js"></script>
    <script src="./lib/OBJLoader.js"></script>
    <script src="./lib/MTLLoader.js"></script>
    <script src="./lib/OBJMTLLoader.js"></script>

    <!-- object oriented back-end implementation from PEWI 2.1 -->
    <script src="./back-end/helperMethods.js"></script>
    <script src="./back-end/helperObjects.js"></script>
    <script src="./back-end/mainBE.js"></script>

    <!-- front-end javascript functions for updates with webpage -->
    <script src="./front-end/loader.js"></script>
    <script src="./front-end/resultsDisplay.js"></script>
    <script src="./front-end/gameLogic.js"></script>
    <script src="./front-end/mainFE.js"></script>
    <script src="./front-end/helpersFE.js"></script>
    <script src="./front-end/levelLoader.js"></script>
    
    <!--from http://www.schillmania.com/projects/fireworks/ -->
    <script type="text/javascript" src="./lib/fireworks.js"></script>
    <link rel="stylesheet" type="text/css" href="./lib/fireworks.css" media="screen" />
    
    <!--from http://threejs.org/examples/#canvas_geometry_birds -->
    <script src="./front-end/boid.js"></script>
    <script src="./front-end/Bird.js"></script>
    

</head>

<link href='https://fonts.googleapis.com/css?family=Amatic+SC:700' rel='stylesheet' type='text/css'>

<body id="body">
 
     <script>
     
     //Preload gifs and backgrounds on startup     
     var img1 = new Image();
     img1.src = "./imgs/loader.gif" ;
     var img2 = new Image();
     img2.src ="./imgs/meadowlarkanimation.gif";
     var img3 = new Image();
     img3.src = "./htmlFrames/imgs/normalBack.png";
     var img4 = new Image();
     img4.src = "./htmlFrames/imgs/pewiLogoLarge.png";
     
     </script>
 
    <!-- Create hidden div to contain settings/options for in-game updates -->
    <div id="settingsHolder" style="position:absolute; cursor:default; background:rgba(0,0,0,0); overflow:hidden; margin:0px; padding:0px; height:0px; width:0px;">
    <input id="firefoxWorkaround"></input>
    <div id="parameters"></div>
    </div>
    
    <!-- Main webpage element containing pewi -->
    <div id="page" style="visibility:hidden;">
    
    <!-- Begin left side console with land-type painter, precipitation, ecosystem indicators and feature highlighting functions -->
    <!-- Create left-side console button tabs -->
    <!-- "Pickaxe" by Luke Anthony Firth on http://thenounproject.com with with CC BY 3.0 (https://creativecommons.org/licenses/by/3.0/) / Colors inverted -->
    <div id="toolsButton" class="consoleButton" onclick="roll(1);"> <img id="pick" src="./imgs/pickOut.png" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();">
    </div>

    <div id="tabButtons" class="tabButtons" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();">
        <!-- "Mountain" by Lee Mette on http://thenounproject.com with with CC BY 3.0 (https://creativecommons.org/licenses/by/3.0/) / Colors inverted -->
        <div id="terrainButton" class="consoleButton" onclick="switchConsoleTab(1);"><img id="terrainImg" class="imgSelected" src="./imgs/terrainIcon.png"></div>
        <!-- "Cloud, raindrops, sun icon" by Yannick Lung (http://yannicklung.com/) with free commercial use / Inverted and resized -->
        <div id="precipButton" class="consoleButton" onclick="switchConsoleTab(2);"><img id="precipImg" class="imgNotSelected" src="./imgs/precipIcon.png"></div>
        <!-- "Filter, levels, settings icon" by Yash Ranpara (https://www.iconfinder.com/yash11) with free commerical use / Inverted and resized -->
        <div id="levelsButton" class="consoleButton" onclick="switchConsoleTab(3);"><img id="levelsImg" class="imgNotSelected" src="./imgs/levelsIcon.png"></div>
        <!-- "Holiday, ocean, river, sea, summer, water, wave, ..." by Olya Philipenko (https://www.iconfinder.com/hk12215) with free commercial / Inverted and resized -->
        <div id="featuresButton" class="consoleButton" onclick="switchConsoleTab(4);"><img id="featuresImg" class="imgNotSelected" src="./imgs/featuresIcon.png"></div>

        <div id="settingsButton" class="consoleButton" onclick="switchConsoleTab(5);"><img id="settingsImg" class="imgNotSelected" src="./imgs/settingsIcon.png"></div>
    </div>



    <!-- Create left-side console displays-->
    <!-- Land type painter display -->
    <div id="leftConsole" class="leftConsole" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();">

        <div id="painterTab" class="consoleTab">

            <img id="paint1" class="landSelectedIcon" src="./imgs/conventionalCorn.png" onclick="paintChange(1);">
            <img id="paint2" class="landSelectorIcon" src="./imgs/conservationCorn.png"  onclick="paintChange(2); ">
            <img id="paint3" class="landSelectorIcon" src="./imgs/conventionalSoybean.png" onclick="paintChange(3);">
            <img id="paint4" class="landSelectorIcon" src="./imgs/conservationSoybean.png" onclick="paintChange(4);">
            <img id="paint15" class="landSelectorIcon" src="./imgs/fruits.png" onclick="paintChange(15);">

            <img id="paint5" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/alfalfa.png" onclick="paintChange(5);">
            <img id="paint8" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/grassHay.png" onclick="paintChange(8);">
            <img id="paint12" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/herbaceous.png" onclick="paintChange(12);">
            <img id="paint6" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/permanentPasture.png" onclick="paintChange(6);">
            <img id="paint7" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/rotationalGrazing.png" onclick="paintChange(7);">

            <img id="paint14" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/wetland.png" onclick="paintChange(14);">
            <img id="paint9" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/prairie.png" onclick="paintChange(9);">
            <img id="paint11" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/conventionalForest.png" onclick="paintChange(11);">
            <img id="paint10" class="landSelectorIcon"   class="landSelectorIcon" src="./imgs/conservationForest.png" onclick="paintChange(10);">
            <img id="paint13" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/shortRotation.png" onclick="paintChange(13);">

            <img id="paintPlayer1" style="display:none;" onmouseover="showInfo('Assign Player 1');" onmouseout="clearInfo();" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/player1.png" onclick="paintChange(1)">
            <img id="paintPlayer2" style="display:none;" onmouseover="showInfo('Assign Player 2');" onmouseout="clearInfo();" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/player2.png" onclick="paintChange(2)">
            <img id="paintPlayer3" style="display:none;" onmouseover="showInfo('Assign Player 3');" onmouseout="clearInfo();" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/player3.png" onclick="paintChange(3)">
            <img id="paintPlayer4" style="display:none;" onmouseover="showInfo('Assign Player 4');" onmouseout="clearInfo();" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/player4.png" onclick="paintChange(4)">
            <img id="paintPlayer5" style="display:none;" onmouseover="showInfo('Assign Player 5');" onmouseout="clearInfo();" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/player5.png" onclick="paintChange(5)">
            <img id="paintPlayer6" style="display:none;" onmouseover="showInfo('Assign Player 6');" onmouseout="clearInfo();" class="landSelectorIcon"  class="landSelectorIcon" src="./imgs/player6.png" onclick="paintChange(6)">
            
        </div>

        <!-- Precipitation display -->
        <div id="precipTab" class="consoleTab" style="display:none;">
            <form method="precipValues" action=" ">
                <div id="precipTitle">Precipitation</div>

                <div id="year0PrecipContainer" class="styled-select">
                    Year 0:
                    <select id="year0Precip" onChange="updatePrecip(0)">

                        <option value=0>24.58</option>
                        <option value=1>28.18</option>
                        <option value=2>30.39</option>
                        <option value=3>32.16</option>
                        <option value=4>34.34</option>
                        <option value=5>36.47</option>
                        <option value=6>45.1</option>
                    </select>
                </div>
                <div id="year1PrecipContainer" class="styled-select">
                    Year 1:
                    <select id="year1Precip" onChange="updatePrecip(1)">
                        <option value=0>24.58</option>
                        <option value=1>28.18</option>
                        <option value=2>30.39</option>
                        <option value=3>32.16</option>
                        <option value=4>34.34</option>
                        <option value=5>36.47</option>
                        <option value=6>45.1</option>
                    </select>
                </div>
                <div id="year2PrecipContainer" class="styled-select">
                    Year 2:
                    <select id="year2Precip" onChange="updatePrecip(2)">
                        <option value=0>24.58</option>
                        <option value=1>28.18</option>
                        <option value=2>30.39</option>
                        <option value=3>32.16</option>
                        <option value=4>34.34</option>
                        <option value=5>36.47</option>
                        <option value=6>45.1</option>
                    </select>
                </div>
                <div id="year3PrecipContainer" class="styled-select">
                    Year 3:
                    <select id="year3Precip" onChange="updatePrecip(3)">
                        <option value=0>24.58</option>
                        <option value=1>28.18</option>
                        <option value=2>30.39</option>
                        <option value=3>32.16</option>
                        <option value=4>34.34</option>
                        <option value=5>36.47</option>
                        <option value=6>45.1</option>
                    </select>
                </div>
            </form>

        </div>

        <!-- Ecosystem indicator highlighting display -->
        <div id="levelsTab" class="consoleTab" style="display:none;">
            <div id="nitrateDetailsList" class="levelDetailsListRolled">
                <div class="levelColor1">
                    <p class="levelsTextDetails">0 - 5 %</p>
                </div>
                <div class="levelColor2">
                    <p class="levelsTextDetails">5 - 10 %</p>
                </div>
                <div class="levelColor3">
                    <p class="levelsTextDetails">10 - 20 %</p>
                </div>
                <div class="levelColor4">
                    <p class="levelsTextDetails">10 - 25 %</p>
                </div>
                <div class="levelColor5">
                    <p class="levelsTextDetails">> 25 %</p>
                </div>
            </div>
            <div id="erosionDetailsList" class="levelDetailsListRolled">
                <div class="levelColor1">
                    <p class="levelsTextDetails">
                        < 0.5 t/ac/yr</p>
                </div>

                <div class="levelColor2">
                    <p class="levelsTextDetails">0.5-2 t/ac/yr</p>
                </div>
                <div class="levelColor3">
                    <p class="levelsTextDetails">2-3.5 t/ac/yr</p>
                </div>
                <div class="levelColor4">
                    <p class="levelsTextDetails">3.5-5 t/ac/yr</p>
                </div>
                <div class="levelColor5">
                    <p class="levelsTextDetails">> 5 t/ac/yr</p>
                </div>
            </div>
            <div id="phosphorusDetailsList" class="levelDetailsListRolled">
                <div class="levelColor1">
                    <p class="levelsTextDetails">Very Low</p>
                </div>
                <div class="levelColor2">
                    <p class="levelsTextDetails">Low</p>
                </div>
                <div class="levelColor3">
                    <p class="levelsTextDetails">Medium</p>
                </div>
                <div class="levelColor4">
                    <p class="levelsTextDetails">High</p>
                </div>
                <div class="levelColor5">
                    <p class="levelsTextDetails">Very High</p>
                </div>
            </div>
            <!-- "Letter N Ig Icon" by Supratim Nayak (http://www.iconarchive.com/artist/hydrattz.html) with free commercial use -->
            <p class="levelsText">Subwatershed Nitrate-N Percent Contribution</p><img id="nitrateIcon" class="levelsSelectorIcon" src="./imgs/N.png" style="border-radius: 50%;" onclick= "displayLevels('nitrate');">
            <!-- "Letter E gold Icon" by Supratim Nayak (http://www.iconarchive.com/artist/hydrattz.html) with free commercial use -->
            <p class="levelsText">Gross Erosion</p><img id="erosionIcon" class="levelsSelectorIcon" src="./imgs/E.png" style="border-radius: 50%;" onclick="displayLevels('erosion');">
            <!-- "Letter P blue Icon" by Supratim Nayak (http://www.iconarchive.com/artist/hydrattz.html) with free commercial use -->
            <p class="levelsText">Phosphorus Index Risk Assessment</p><img id="phoshorusIcon" class="levelsSelectorIcon" src="./imgs/P.png" style="border-radius: 50%;" onclick="displayLevels('phosphorus');">
        </div>

        <!-- Watershed feature display -->
        <div id="featuresTab" class="consoleTab" style="display:none;">
            <div id="floodFrequencyDetailsList" class="physicalDetailsListRolled">
                <div class="floodColor1" >
                    <p class="levelsTextDetails" style="margin-top:10px;">None</p>
                </div>
                <div class="floodColor2">
                    <p class="levelsTextDetails">Rare</p>
                </div>
                <div class="floodColor3">
                    <p class="levelsTextDetails">Occasionally</p>
                </div>
                <div class="floodColor4">
                    <p class="levelsTextDetails">Frequently</p>
                </div>
                <div class="floodColor5">
                    <p class="levelsTextDetails">Ponded</p>
                </div>
            </div>
            <div id="drainageClassDetailsList" class="physicalDetailsListRolled">
                <div class="drainageColor1" >
                    <p class="levelsTextDetails" style="margin-top:10px;" >Poor</p>
                </div>
                <div class="floodColorNone">
                    <p class="levelsTextDetails">to</p>
                </div>
                <div class="drainageColor2">
                    <p class="levelsTextDetails">Excessive</p>
                </div>
            </div>
            <div id="wetlandClassDetailsList" class="physicalDetailsListRolled">
            </div>
            <div id="subwatershedClassDetailsList" class="physicalDetailsListRolled">
            </div>
            <p class="featuresText">Flood Frequency</p><img id="floodFrequency" class="featureSelectorIcon" src="./imgs/Icon_Flood_Frequency.svg" onclick="displayLevels('flood');">
            <p class="featuresText">Strategic Wetlands</p><img id="strategicWetlands" class="featureSelectorIcon" src="./imgs/Icon_Strategic_Wetlands.svg" onclick="displayLevels('wetland');">
            <p class="featuresText">Subwatershed Boundaries</p><img id="subwatershedBoundaries" class="featureSelectorIcon" src="./imgs/Icon_Subwatershed_Boundaries.svg" onclick="displayLevels('subwatershed');">
            <p class="featuresText">Drainage Class</p><img id="drainageClass" class="featureSelectorIcon" src="./imgs/Icon_Drainage_Class.svg" onclick="displayLevels('drainage');">
        </div>
        
        <!-- Painter settings display -->
        <div id="settingsTab" class="consoleTab" style="display:none;">
             <img id="cellPaint" class="painterIconSelected" src="./imgs/cellPainter.png" onclick="painterSelect(1);">
             <img id="gridPaint" class="painterIcon" src="./imgs/gridPainter.png" onclick="painterSelect(2);">
             <img id="hoverPaint" class="painterIcon" src="./imgs/hoverPainter.png" onclick="painterSelect(3);">
             
        </div>
        
    </div>

    <!-- Create results button -->
    <div id="resultsButton" class="resultsButtonRolled" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();" onclick="resultsStart() ;"><img src="./imgs/resultsIcon.png"></div>

    <!-- Create year buttons -->
    <!-- "Exposure, zero icon" by Google Design (https://design.google.com/) used under CC BY (https://creativecommons.org/licenses/by/3.0/) / Inverted from original -->
    <div id="year0Button" class="yearButton" onclick="transitionToYear(0); switchYearTab(0);" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();"><img id="year0Image" class="yearNotSelected" src="./imgs/zero_40px.png"></div>
    <!-- "Looks, one icon" by Google Design (https://design.google.com/) used under CC BY (https://creativecommons.org/licenses/by/3.0/) / Inverted from original -->
    <div id="year1Button" class="yearButton" onclick="transitionToYear(1); switchYearTab(1);" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();"><img id="year1Image" class="yearSelected" src="./imgs/one.png"></div>
    <!-- "Looks, two icon" by Google Design (https://design.google.com/) used under CC BY (https://creativecommons.org/licenses/by/3.0/) / Inverted from original -->
    <div id="year2Button" class="yearButton" onclick="transitionToYear(2); switchYearTab(2);" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();"><img id="year2Image" class="yearNotSelected" src="./imgs/two.png"></div>
    <!-- "Looks, three icon" by Google Design (https://design.google.com/) used under CC BY (https://creativecommons.org/licenses/by/3.0/) / Inverted from original -->
    <div id="year3Button" class="yearButton" onclick="transitionToYear(3); switchYearTab(3);" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();"><img id="year3Image" class="yearNotSelected" src="./imgs/three.png"></div>

    <!-- Create buttons in upper right corner -->
    <img id="logoBase" src="./imgs/inGameLogo.png" >
    <img id="uploadDownloadButton" class="upperButton" width="40px" src="./imgs/uploadDownloadIcon.png" onclick="showUploadDownload();" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();">
    <img id="creditsButton" class="upperButton" width="40px" src="./imgs/credits_button.png" onclick="showCredits();" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();">
    
    <!-- Create iFrames for credits, upload/download, and codex -->
    <iframe id="creditsFrame" style="display:none;" src="./htmlFrames/credits.html"></iframe>
    <img id="closeCredits" class="closeButton" style="display:none;" src="./imgs/close_black.png" onclick="closeCreditFrame() ;">
    <iframe id="uploadDownloadFrame" style="display:none;" src="./htmlFrames/uploadDownload.html"></iframe>
    <img id="closeUploadDownload" class="closeButton" style="display:none;" src="./imgs/close_black.png" onclick="closeUploadDownloadFrame();">
    <iframe id="index" src="./modules/codex/codex.html"></iframe>

    
    <!-- Create dialogue popup box -->
    <!-- "Bubble, speech icon" by http://www.iconsolid.com/ with free commercial usage / Inverted from original and resized -->
    <div id="dialogueButton" class="dialogueButtonRolled" onclick="togglePopupDisplay();"><img src="./imgs/dialogue.png" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();"></div>
    <div id="popup" class="popupHidden" onmouseover="toggleChangeLandType();" onmouseout="toggleChangeLandType();">
        <div id="nextLevelButton" class="moveButtonHidden" onclick = "loadLevel(levelGlobal + 1);">Next Level</div>
        <div id="mainMenuButton" class="moveButtonHidden" onclick="showMainMenu();">Main Menu</div>
        <p id="popupText"></p>
    </div>
    
    <!-- Include fireworks javascript library -->
    <div id="fireworks-template">
        <div id="fw" class="firework"></div>
        <div id="fp" class="fireworkParticle"><img src="./imgs/particles.gif" alt="" /></div>
    </div>
    <div id="fireContainer"></div>
    
    <!-- Place meadowlark gif off page -->
    <img id="meadowlark" class="meadowlarkhidden" src="./imgs/meadowlarkanimation.gif"></div>

    <!-- Add heads up display in lower left corner -->
    <div id="bottomHUD" class="bottomHUD">
        <p id="currentInfo">
    </div>
    
    <!-- Create iframes for the results, options and multiplayer screens -->
    <iframe id="resultsFrame" class="resultsFrameRolled" src="./htmlFrames/results.html"></iframe>
    <img id="closeResults" class="closeButton" style="opacity:0; visibility:hidden; right:17%;" src="./imgs/close_black.png" onclick="resultsEnd() ;">
    <iframe id="options" src="./htmlFrames/options.html"></iframe>
    <iframe id="multiPlayer" src="./htmlFrames/multiDownload.html"></iframe>
     
    </div> <!-- End of page div -->
    
    <div id="modalEscapeFrame">
        <div id="escapeMenu">
            <div class="mainEscapeButton" id="exitToMenuButton" onclick="showMainMenu(); toggleEscapeFrame();">Main Menu</div>
            <div class="mainEscapeButton" id="optionsButton" onclick="if(!multiAssignMode){toggleEscapeFrame(); startOptions();};">Options</div>
            <div class="mainEscapeButton" id="directoryButton" onclick="toggleEscapeFrame(); toggleIndex() ;">Directory</div>
        </div>
    </div>

    <!-- Add spinning circle loading gif -->
    <div id="loading" style="visibility:hidden;">
    <div id="loadingContainer">
        <center>
        <br><br>
        <img src="./imgs/loader.gif">  
        </center>
    </div>
    </div>

    <!-- Add div and iFrame for the startup page -->
    <div id="startupSequence" style="position:absolute; padding:0px margin:0px; width:100%; height:100%;">
    <iframe id="startUpFrame" src="./htmlFrames/startup.html" style="width:100%; height:100%; padding:0px margin:0px;"></iframe>    
    </div>

</body>

</html>