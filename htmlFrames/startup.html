<!doctype html>

<!--
Comments

Cleaned and Prepared - July 2016
-->

<html>
<head>
    <meta charset="utf-8">
    <title>Workspace - Start</title>

    <!-- INCLUDES -->
    <!--css-->
    <link rel="stylesheet" type="text/css" href="./frameStylesheet.css">
    <!--external fonts-->
    <link href='https://fonts.googleapis.com/css?family=Amatic+SC:700' rel='stylesheet' type='text/css'>
    <!-- /INCLUDES -->

    <!--additional styling-->
<style>
   body{
   overflow: hidden;
   background: black;
   }
   
   .underGif{
    position:absolute;
    width:100% ;
    height:10%;
    left:0px;
    opacity:0.4;
     -webkit-transition-duration: 10s; /* Safari */
    transition-duration: 10s
    }
   
   #under1{
    bottom:0px;
   }
   
   #under2{
    bottom:9%;
   }
   
   #riverColor{
    background-color: #40A4DF;
    width:100%;
    height:100%;
    position:absolute;
    left:0px;
    bottom:0px;
    opacity:1;
    -webkit-transition-duration: 7s; /* Safari */
    transition-duration: 7s
   }
   
</style>

</head>
<body>

 <div style="opacity:0;" id="riverColor"></div>
 <img id="under1" style="opacity:0;" class="underGif" src="./imgs/water.gif">
 <img id="under2" style="opacity:0;" class="underGif" src="./imgs/water.gif">
 <img id="startupBackgroundImage" style="opacity:0;" src="./imgs/testBackRiver.png">

 <div id="startupContent">
 <!-- Insert background image -->

 <!-- Insert PEWI Image logo and buttons for Sandbox, Play, and Utilities -->
 <div id="startupContentsHolder">

  <div id="pewiTitle">
   <!-- hidden -->
   <img src="./imgs/pewiLogoLarge.png" />
  </div>

  <div id="startupButton1" onmouseover="highlightButton(1,1);" onmouseout="highlightButton(1,0);" class="mainButton" onclick="startSandbox();">Sandbox</div>
  <div id="startupButton2" onmouseover="highlightButton(2,1);" onmouseout="highlightButton(2,0);" class="mainButton" onclick="startPlay();">Play</div>
  <div id="startupButton3" onmouseover="highlightButton(3,1);" onmouseout="highlightButton(3,0);" class="mainButton" onclick="startUtilities();">Utilities</div>

  <div id="startupInformationText"></div>

 </div>


</div>
 <!-- Insert container for loading animation and expanded PEWI title -->
 <div id="startupLoadingContainer">
  
  <video id="startVideo" width="440" height="1120" autoplay="autoplay">
      <source src="./imgs/PewiLoading.webm" type="video/webm" />
      loading
  </video>

  <div id="startupLoadingTitle">
   People in Ecosystems / Watershed Integration
  </div>

 </div>

<iframe id="startupDialogueOverlay"></iframe>

<script type='text/javascript'>

//Start initial screen video animation
document.getElementById('startVideo').addEventListener('ended', function() {
 endOfVideo();
}, false);

setTimeout(function() {
 var vid = document.getElementById("startVideo");
 if (!(Number(vid.currentTime) > 0)) {
  endOfVideo();
 }
}, 2000);

//Create three framework and load textures
createEnvironment();

//endFunction displays and animates startup page elements
function endOfVideo() {

 //Display elements on start up page
 document.getElementById('startupContent').style.opacity = "1";
 document.getElementById('startupLoadingContainer').style.display = "none";
 document.getElementById('startupContentsHolder').style.visibility = "visible";
 
 document.getElementById('pewiTitle').style.opacity = "1";
 document.getElementById('pewiTitle').style.marginTop = "0";
 document.getElementById('riverColor').style.opacity = "1" ;
 document.getElementById('under1').style.opacity = "0.4" ;
 document.getElementById('under2').style.opacity = "0.4" ;
 
 document.getElementById('startupBackgroundImage').style.opacity = "1" ;
 document.getElementById('startupButton1').style.opacity = "1";
 document.getElementById('startupButton2').style.opacity = "1";
 document.getElementById('startupButton3').style.opacity = "1";

 //Animate the display of elements on start up page
 setTimeout(function() {
  //document.getElementById('backImg').style.transitionDuration = "70s" ; 
  document.getElementById('startupButton1').style.transitionDuration = ".4s" ;
  document.getElementById('startupButton2').style.transitionDuration = ".4s" ;
  document.getElementById('startupButton3').style.transitionDuration = ".4s" ;
  document.getElementById('pewiTitle').style.transitionDuration = ".4s" ;
  document.getElementById('startupContentsHolder').style.transitionDuration = ".4s" ;
 
  
 }, 10);

 //Animate the background image
 setTimeout( function() {
  
  //180s, -3000px
  document.getElementById('startupBackgroundImage').style.transitionDuration = "300s";
  //document.getElementById('startupBackgroundImage').style.bottom = "-3000px" ;
 }, 4000);

} //end endFunction

//startSandbox hides the startup page and loads the sandbox
function startSandbox() {
 
 //Hide startup page elements
 document.getElementById('startupButton2').style.display = "none" ;
 document.getElementById('startupButton3').style.display = "none" ;
 document.getElementById('startupButton1').style.left = "50%" ;
 document.getElementById('startupButton1').style.backgroundColor = "#003d4d" ;
 document.getElementById('pewiTitle').style.marginTop = "100px";
 document.getElementById('startupContentsHolder').style.marginTop = "0px";
 document.getElementById('startupContentsHolder').style.top = "0%";
 document.getElementById('startupContentsHolder').style.height = "100%" ;
 document.getElementById('startupContentsHolder').style.backgroundColor = "rgba(0,0,0,1)" ;
 document.getElementById('startupInformationText').innerHTML = "" ;
 
 //Load sandbox level
 setTimeout(function() {
   parent.loadLevel(0);
 }, 400);

} //end startSandbox

//startUtilities hides the startup page elements and displays utilities
function startUtilities() {
 
 //Hide startup page elements
 document.getElementById('startupButton1').style.display = "none" ;
 document.getElementById('startupButton2').style.display = "none" ;
 document.getElementById('startupButton3').style.left = "50%" ;
 document.getElementById('startupButton3').style.backgroundColor = "#003d4d" ;
 document.getElementById('pewiTitle').style.marginTop = "100px";
 document.getElementById('startupContentsHolder').style.marginTop = "0px";
 document.getElementById('startupContentsHolder').style.top = "0%";
 document.getElementById('startupContentsHolder').style.height = "100%" ;
 document.getElementById('startupContentsHolder').style.backgroundColor = "rgba(0,0,0,0)" ;
 document.getElementById('startupInformationText').innerHTML = "" ;
  
 //Display utilities elements
 setTimeout(function() {
  document.getElementById('startupDialogueOverlay').style.visibility = "visible" ;
   document.getElementById('startupButton1').style.visibility = "hidden" ;
   document.getElementById('startupButton2').style.visibility = "hidden" ;
   document.getElementById('startupButton3').style.visibility = "hidden" ;
   document.getElementById('pewiTitle').style.visibility = "hidden" ;
   
   setTimeout(function() { 
  document.getElementById('startupDialogueOverlay').src = "utilities.html" ;
  document.getElementById('startupDialogueOverlay').style.visibility = "visible" ;
   }, 400) ;
   
  setTimeout(function() { resetElements() ; }, 800);
  }, 400);
  
} //end startUtilities

//startPlay hides the startup page elements and displays the level selector
function startPlay() {
 
 //Hide startup page elements
 document.getElementById('startupButton1').style.display = "none" ;
 document.getElementById('startupButton3').style.display = "none" ;
 document.getElementById('startupButton2').style.top = "50%" ;
 document.getElementById('startupButton2').style.backgroundColor = "#003d4d" ;
 document.getElementById('pewiTitle').style.marginTop = "100px";
 document.getElementById('startupContentsHolder').style.marginTop = "0px";
 document.getElementById('startupContentsHolder').style.top = "0%";
 document.getElementById('startupContentsHolder').style.height = "100%" ;
 document.getElementById('startupContentsHolder').style.backgroundColor = "rgba(0,0,0,0)" ;
 document.getElementById('startupInformationText').innerHTML = "" ;
  
 //Display level selector
 setTimeout(function() {
   
   document.getElementById('startupButton1').style.visibility = "hidden" ;
   document.getElementById('startupButton2').style.visibility = "hidden" ;
   document.getElementById('startupButton3').style.visibility = "hidden" ;
   document.getElementById('pewiTitle').style.visibility = "hidden" ;
   
   setTimeout(function() { 
    document.getElementById('startupDialogueOverlay').src = "play.html" ; 
   document.getElementById('startupDialogueOverlay').style.visibility = "visible" ;
   }, 400);
   
   setTimeout(function() { resetElements() ; }, 800);
 }, 400) ;

} //end startPlay

//resetElements shows the elements of the startup page after reutrning to the page
function resetElements(){


 document.getElementById('startupButton1').style.display = "block" ;
 document.getElementById('startupButton2').style.display = "block" ;
 document.getElementById('startupButton3').style.display = "block" ;
 document.getElementById('startupButton1').style.backgroundColor = "#40A4DF" ;
 document.getElementById('startupButton2').style.backgroundColor = "#40A4DF" ;
 document.getElementById('startupButton3').style.backgroundColor = "#40A4DF" ;
 document.getElementById('startupButton1').style.left = "25%" ;
 document.getElementById('startupButton2').style.top = "50%" ;
 document.getElementById('startupButton3').style.left = "75%" ;
  document.getElementById('pewiTitle').style.marginTop = "0px";
  
 
} //end resetElements

//reset reactivates elements on the startup page
function reset() {
 
 document.activeElement.blur() ;
 
 document.getElementById('startupDialogueOverlay').src = "" ;
 document.getElementById('startupDialogueOverlay').style.visibility = "hidden" ;
  
 document.getElementById('startupContentsHolder').style.marginTop = "-250px";
 document.getElementById('startupContentsHolder').style.top = "50%";
 document.getElementById('startupContentsHolder').style.height = "500px" ;
 document.getElementById('startupContentsHolder').style.backgroundColor = "rgba(0,0,0,0)" ;
 
    document.getElementById('startupButton1').style.visibility = "visible" ;
   document.getElementById('startupButton2').style.visibility = "visible" ;
   document.getElementById('startupButton3').style.visibility = "visible" ;
   document.getElementById('pewiTitle').style.visibility = "visible" ;
 
} //end reset

function recallMain(){
 resetElements() ;
 reset() ;
 document.getElementById('startupBackgroundImage').style.bottom = "0px" ;
}

//highlightButton toggles the color of startup page buttons when hovered over
function highlightButton(value, on) {
  
   var string = "startupButton" + value ;
   if(on){
      document.getElementById(string).style.backgroundColor = "#7cc1e9" ;
      var message = "";
      
      switch(value){
       case 1:
        message = "explore the watershed" ;
        break;
       case 2:
        message = "exercises and interaction" ;
        break;
       case 3:
        message = "extend the application" ;
        break;
      }
      
      document.getElementById('startupInformationText').innerHTML = message;
   }
   else{
      document.getElementById('startupInformationText').innerHTML = "" ;
      document.getElementById(string).style.backgroundColor = "#40A4DF" ;
   }
   
}

//createEnvironment creates scene generic THREE.js elements and loads textures
function createEnvironment(){
 
 parent.createThreeFramework();
 parent.initializeCamera();
 parent.initializeLighting();
 parent.setupHighlight();
 parent.loadingManager();
 var returned = parent.loadResources();
 parent.animationFrames();

} //createEnvironment

</script>

</body>
</html>