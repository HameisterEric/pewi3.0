<html>
<head>

<style>

* {
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none;   /* Chrome/Safari/Opera */
  -khtml-user-select: none;    /* Konqueror */
  -moz-user-select: none;      /* Firefox */
  -ms-user-select: none;       /* Internet Explorer/Edge */
  user-select: none;           /* Non-prefixed version, currently
                                  not supported by any browser */
}

body{
overflow: hidden;
background-color: #000000;
}

#backImg {
position:absolute;
top:0px;
left:0px;
margin:0px;
padding:0px;
height:100% ;
width:4000px;
opacity: 0;

-webkit-transition-duration: 7s; /* Safari */
transition-duration: 7s;

}

#contentsHolder{
position:fixed;
margin:0px;
opacity: 0;
margin-top:-200px;
left:0%;
top:50%;

background-color: rgba(0,0,0,0);
width:100% ;
height:400px;
border-radius:0px;
border-top: 0px solid white;
border-bottom: 0px solid white;

-webkit-transition-duration: 1.3s; /* Safari */
transition-duration: 1.3s;
}

#pewiTitle{

position:fixed;
width:240px;
margin-left:-120px;
padding: 0px;

left:50%;
top:60% ;

-webkit-transition-duration: 1s; /* Safari */
transition-duration: 1s;
}

.mainButton {
position:fixed;
background-color: #008fb3 ;
width:200px;
border-radius:12px;
height:50px ;
color: white ;
padding:5px;
border: 2px solid white;
cursor: all-scroll ;
font-family: 'Amatic SC', cursive;
text-align:center;
line-height: 130%;
color: #FFFFFF;
font-size: 40px ;
font-weight: bold;
margin-left:-100px;
margin-right:10px;
margin-top:-25px;
top:50% ;
opacity: 0;

}



#button1{
left:25%;
-webkit-transition-duration: 1.5s; /* Safari */
transition-duration: 1.5s;
}

#button2{
left:50%;
-webkit-transition-duration: 2.2s; /* Safari */
transition-duration: 2.2s;
}

#button3{
left:75%;
-webkit-transition-duration: 2.9s; /* Safari */
transition-duration: 2.9s;
}

#container{
position:absolute;
width:800px ;
height:600px ;
margin:0px ;
padding: 0px ;
margin-left:-400px ;
left:50% ;
margin-top:-300px;
top:50%;

}

#loadingTitle {
font-family: 'Amatic SC', cursive;
text-align:center;
line-height: 85%;
color: #FFFFFF;
font-size: 35px ;
font-weight: bold;

position:absolute;
width:60% ;
left:20%;
height:40px;
top:183px;
border-bottom: 1px solid white ;


}

#dialogue {
 position:fixed;
 top: 0px;
 left: 0px;
 padding: 0px;
 border: 0px;
 margin: 0px;
 width:100%;
 height:100%;
 visibility: hidden;
}

#city {
position:absolute;
top:-150px;
left:100px;

 
}

</style>

<script>

function moveBackground() {
	var value = 0 - (4000 - screen.width - 300) ; //-300 just to be safe
	document.getElementById('backImg').style.left = value;
}


</script>

</head>

<link href='https://fonts.googleapis.com/css?family=Amatic+SC:700' rel='stylesheet' type='text/css'>

<body id="body">


<img id="backImg" src="./imgs/backMap.png">

<div id="contentsHolder">

<div id="pewiTitle"> <!-- hidden -->
<img src="./imgs/pewiLogoLarge.png" /> 
</div>


<div id="button1" onmouseover="highlightButton(1,1);" onmouseout="highlightButton(1,0);" class="mainButton" onclick="startSandbox();">Sandbox</div>

<div id="button2" onmouseover="highlightButton(2,1);" onmouseout="highlightButton(2,0);" class="mainButton" onclick="startPlay();">Play</div>


<div id="button3" onmouseover="highlightButton(3,1);" onmouseout="highlightButton(3,0);"class="mainButton" onclick="startOptions();">Options</div>

</div>


<div id="container">
<video id="startVideo" width="800" height="1500px" autoplay="autoplay" style="margin-top:-300px;">
<source src="./imgs/start.webm" type="video/webm" />
loading
</video>

<div id="loadingTitle">
<img id="city" src="./imgs/citySilloute.png">
People in Ecosystems / Watershed Integration
</div>
</div>

<iframe id="dialogue"></iframe>

<script type='text/javascript'>

document.getElementById('startVideo').addEventListener('ended', function() {
 endFunction();
}, false);

setTimeout(function() {

 var vid = document.getElementById("startVideo");
 if (!(Number(vid.currentTime) > 0)) {
  endFunction();

 }
 

}, 2000);


createEnvironment();


function endFunction() {
 

 document.getElementById('container').style.display = "none";
 document.getElementById('pewiTitle').style.visibility = "visible";
 document.getElementById('pewiTitle').style.opacity = "1";
 document.getElementById('pewiTitle').style.top = "5%" ;
 
 document.getElementById('contentsHolder').style.opacity = "1" ;
 document.getElementById('backImg').style.opacity = ".9" ;

 
 document.getElementById('button1').style.visibility = "visible";
 document.getElementById('button1').style.opacity = "1";
 document.getElementById('button2').style.visibility = "visible";
 document.getElementById('button2').style.opacity = "1";
 document.getElementById('button3').style.visibility = "visible";
 document.getElementById('button3').style.opacity = "1";

 

 setTimeout(function() {
 document.getElementById('backImg').style.transitionDuration = "70s" ; 
 document.getElementById('button1').style.transitionDuration = ".4s" ;
 document.getElementById('button2').style.transitionDuration = ".4s" ;
 document.getElementById('button3').style.transitionDuration = ".4s" ;
 document.getElementById('pewiTitle').style.transitionDuration = ".4s" ;
 document.getElementById('contentsHolder').style.transitionDuration = ".4s" ;
 
  moveBackground() ;
  
}, 10);
 
 
}




function startSandbox() {
 
 document.getElementById('button2').style.display = "none" ;
 document.getElementById('button3').style.display = "none" ;
 document.getElementById('button1').style.left = "50%" ;
 document.getElementById('button1').style.backgroundColor = "#003d4d" ;
 document.getElementById('contentsHolder').style.marginTop = "0px";
 document.getElementById('contentsHolder').style.top = "0%";
 document.getElementById('contentsHolder').style.height = "100%" ;
 document.getElementById('contentsHolder').style.backgroundColor = "rgba(0,0,0,1)" ;
 
 
 setTimeout(function() {
  
   //parent.initWorkspace();
   parent.initWorkspace("./data.txt");
   
 }, 400);

}

function startOptions() {
 
 document.getElementById('button1').style.display = "none" ;
 document.getElementById('button2').style.display = "none" ;
 document.getElementById('button3').style.left = "50%" ;
 document.getElementById('button3').style.backgroundColor = "#003d4d" ;
 document.getElementById('contentsHolder').style.marginTop = "0px";
 document.getElementById('contentsHolder').style.top = "0%";
 document.getElementById('contentsHolder').style.height = "100%" ;
  document.getElementById('contentsHolder').style.backgroundColor = "rgba(0,0,0,1)" ;
  
 setTimeout(function() {
  
  document.getElementById('dialogue').src = "options.html" ;
  document.getElementById('dialogue').style.visibility = "visible" ;
 
  setTimeout(function() { resetElements() ; }, 300);

 }, 400);
 
}

function startPlay() {
 
 document.getElementById('button1').style.display = "none" ;
 document.getElementById('button3').style.display = "none" ;
 document.getElementById('button2').style.top = "40%" ;
 document.getElementById('button2').style.backgroundColor = "#003d4d" ;
 document.getElementById('contentsHolder').style.marginTop = "0px";
 document.getElementById('contentsHolder').style.top = "0%";
 document.getElementById('contentsHolder').style.height = "100%" ;
 document.getElementById('contentsHolder').style.backgroundColor = "rgba(0,0,0,1)" ;
  
 setTimeout(function() {
  
  //parent.initWorkspace("./front-end/pewiNewMapUpload.csv");
  
  setTimeout(function() { resetElements() ; }, 300);
    
  document.getElementById('dialogue').src = "play.html" ; 
  document.getElementById('dialogue').style.visibility = "visible" ;
  
 }, 400) ;

}

function resetElements(){

 document.getElementById('button1').style.display = "block" ;
 document.getElementById('button2').style.display = "block" ;
 document.getElementById('button3').style.display = "block" ;
 document.getElementById('button1').style.backgroundColor = "rgb(0, 143, 179)" ;
 document.getElementById('button2').style.backgroundColor = "rgb(0, 143, 179)" ;
 document.getElementById('button3').style.backgroundColor = "rgb(0, 143, 179)" ;
 document.getElementById('button1').style.left = "25%" ;
 document.getElementById('button2').style.top = "50%" ;
 document.getElementById('button3').style.left = "75%" ;
 
}


function reset() {
 
  document.activeElement.blur() ;
 
  document.getElementById('dialogue').src = "" ;
  document.getElementById('dialogue').style.visibility = "hidden" ;
  
  document.getElementById('contentsHolder').style.marginTop = "-200px";
 document.getElementById('contentsHolder').style.top = "50%";
 document.getElementById('contentsHolder').style.height = "400px" ;
 document.getElementById('contentsHolder').style.backgroundColor = "rgba(0,0,0,0)" ;
 
}

function highlightButton(value, on) {
  
   var string = "button" + value ;
   
   if(on){
     console.log("h") ;
      document.getElementById(string).style.backgroundColor = "#00b8e6" ;
   }
   else{
      console.log('b') ;
      document.getElementById(string).style.backgroundColor = "#008fb3" ;
   }
 
}

function createEnvironment(){
 
 parent.createThreeFramework();
 parent.initializeCamera();
 parent.initializeLighting();
 parent.setupHighlight();
 
}

  
</script>


</body>

</html>