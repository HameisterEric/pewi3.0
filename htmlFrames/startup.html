<html>
<head>

<!-- Startup CSS elements -->
<style>

   * {
     -webkit-touch-callout: none; /* iOS Safari */
     -webkit-user-select: none;   /* Chrome/Safari/Opera */
     -khtml-user-select: none;    /* Konqueror */
     -moz-user-select: none;      /* Firefox */
     -ms-user-select: none;       /* Internet Explorer/Edge */
     user-select: none;           /* Non-prefixed version, currently
                                     not supported by any browser */
   }
   
   body{
   overflow: hidden;
   background: black;
   
   }
   
   #backImg {
   position:absolute;
   top:0px;
   left:0px;
   margin:0px;
   padding:0px;
   height:100% ;
   width:4000px;
   opacity: 0;
   
   -webkit-transition-duration: 7s; /* Safari */
   transition-duration: 7s;
   
   }
   
   #contentsHolder{
   position:fixed;
   margin:0px;
   opacity: 0;
   margin-top:-200px;
   left:0%;
   top:50%;
   
   background-color: rgba(0,0,0,0);
   width:100% ;
   height:400px;
   border-radius:0px;
   border-top: 0px solid white;
   border-bottom: 0px solid white;
   
   -webkit-transition-duration: 1.3s; /* Safari */
   transition-duration: 1.3s;
   }
   
   #pewiTitle{
   
   position:fixed;
   width:240px;
   margin-left:-111px;
   padding: 0px;
   
   left:50%;
   top:40% ;
   
   -webkit-transition-duration: 1s; /* Safari */
   transition-duration: 1s;
   }
   
   .mainButton {
   position:fixed;
   background-color: #40A4DF ;
   width:200px;
   border-radius:12px;
   height:50px ;
   color: white ;
   padding:5px;
   border: 2px solid white;
   cursor: all-scroll ;
   font-family: 'Amatic SC', cursive;
   text-align:center;
   line-height: 130%;
   color: #FFFFFF;
   font-size: 40px ;
   font-weight: bold;
   }
   
   #button1, #button2, #button3 {
   margin-left:-100px;
   margin-right:10px;
   margin-top:-25px;
   top:50% ;
   opacity: 0;
   }
   
   #button1{
   left:25%;
   -webkit-transition-duration: 1.5s; /* Safari */
   transition-duration: 1.5s;
   }
   
   #button2{
   left:50%;
   -webkit-transition-duration: 2.2s; /* Safari */
   transition-duration: 2.2s;
   }
   
   #button3{
   left:75%;
   -webkit-transition-duration: 2.9s; /* Safari */
   transition-duration: 2.9s;
   }
   
   #container{
   position:absolute;
   width:800px ;
   height:600px ;
   margin:0px ;
   padding: 0px ;
   margin-left:-400px ;
   left:50% ;
   margin-top:-300px;
   top:50%;
   
   }
   
   #loadingTitle {
   font-family: 'Amatic SC', cursive;
   text-align:center;
   line-height: 85%;
   color: #FFFFFF;
   font-size: 35px ;
   font-weight: bold;
   
   position:absolute;
   width:60% ;
   left:20%;
   height:40px;
   top:50px;
   /*border-bottom: 1px solid white ;*/
   
   
   }
   
   #dialogue {
    position:fixed;
    top: 0px;
    left: 0px;
    padding: 0px;
    border: 0px;
    margin: 0px;
    width:100%;
    height:100%;
    visibility: hidden;
   }
   
   #city {
   position:absolute;
   top:-130px;
   left:45px;
   
    
   }
   
   
   #backImg2{
    position:absolute;
    height:80cm;
    bottom : 0px;
    right:0px;
    opacity:0;
    -webkit-transition-duration: 4s; /* Safari */
    transition-duration: 4s;
    width:100%;
    min-width: 1700px;
   
   }
   
   .center {
       margin-left: auto;
       margin-right: auto;
        margin-top:-350px;
       display: block
   }

 #informationText{
  font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
  color:#FFFFFF;
  font-size:25px;
  width:300px;
  margin-left:-140px;
  position:absolute;
  left:50%;
  text-align:center;
  margin-top:60px;
  
 }

</style>
<!-- End startup page CSS elements -->

<script>
//DEPRECATED?
function moveBackground() {
	//var value = 0 - (4000 - screen.width - 300) ; //-300 just to be safe
	//document.getElementById('backImg').style.left = value;
}
</script>

</head>

<!-- Add PEWI font -->
<link href='https://fonts.googleapis.com/css?family=Amatic+SC:700' rel='stylesheet' type='text/css'>

<body id="body">

<!-- Insert background image -->
<img id="backImg2" src="./imgs/normalBack.png">

<!-- Insert PEWI Image logo and buttons for Sandbox, Play, and Utilities -->
<div id="contentsHolder">
 
 <div id="pewiTitle"> <!-- hidden -->
 <img src="./imgs/pewiLogoLarge.png" /> 
 </div>

 <div id="button1" onmouseover="highlightButton(1,1);" onmouseout="highlightButton(1,0);" class="mainButton" onclick="startSandbox();">Sandbox</div>
 <div id="button2" onmouseover="highlightButton(2,1);" onmouseout="highlightButton(2,0);" class="mainButton" onclick="startPlay();">Play</div>
 <div id="button3" onmouseover="highlightButton(3,1);" onmouseout="highlightButton(3,0);"class="mainButton" onclick="startUtilities();">Utilities</div>
 
  <div id="informationText"> </div>

</div>

<!-- Insert container for loading animation and expanded PEWI title -->
<div id="container">
 
 <video id="startVideo" class="center" width="440" height="1120" autoplay="autoplay">
  <source src="./imgs/PewiLoading.webm" type="video/webm" />
  loading
 </video>

 <div id="loadingTitle">
 People in Ecosystems / Watershed Integration
 </div>
 
</div>


<iframe id="dialogue"></iframe>

<script type='text/javascript'>

//Start initial screen video animation
document.getElementById('startVideo').addEventListener('ended', function() {
 endFunction();
}, false);

setTimeout(function() {
 var vid = document.getElementById("startVideo");
 if (!(Number(vid.currentTime) > 0)) {
  endFunction();
 }
}, 2000);

//Create three framework and load textures
createEnvironment();

//endFunction displays and animates startup page elements
function endFunction() {
 
 //Display elements on start up page
 document.getElementById('container').style.display = "none";
 document.getElementById('pewiTitle').style.visibility = "visible";
 document.getElementById('pewiTitle').style.opacity = "1";
 document.getElementById('pewiTitle').style.top = "25%" ;
 
 document.getElementById('contentsHolder').style.opacity = "1" ;
 document.getElementById('backImg2').style.opacity = "1" ;

 document.getElementById('button1').style.visibility = "visible";
 document.getElementById('button1').style.opacity = "1";
 document.getElementById('button2').style.visibility = "visible";
 document.getElementById('button2').style.opacity = "1";
 document.getElementById('button3').style.visibility = "visible";
 document.getElementById('button3').style.opacity = "1";

 //Animate the display of elements on start up page
 setTimeout(function() {
  //document.getElementById('backImg').style.transitionDuration = "70s" ; 
  document.getElementById('button1').style.transitionDuration = ".4s" ;
  document.getElementById('button2').style.transitionDuration = ".4s" ;
  document.getElementById('button3').style.transitionDuration = ".4s" ;
  document.getElementById('pewiTitle').style.transitionDuration = ".4s" ;
  document.getElementById('contentsHolder').style.transitionDuration = ".4s" ;
  //moveBackground() ;
  parent.animationFrames();
 }, 10);

 //Animate the background image
 setTimeout( function() {
  document.getElementById('backImg2').style.transitionDuration = "90s";
  document.getElementById('backImg2').style.bottom = "-45cm" ;
 }, 4000);

} //end endFunction

//startSandbox hides the startup page and loads the sandbox
function startSandbox() {
 
 //Hide startup page elements
 document.getElementById('button2').style.display = "none" ;
 document.getElementById('button3').style.display = "none" ;
 document.getElementById('button1').style.left = "50.6%" ;
 document.getElementById('button1').style.backgroundColor = "#003d4d" ;
 document.getElementById('contentsHolder').style.marginTop = "0px";
 document.getElementById('contentsHolder').style.top = "0%";
 document.getElementById('contentsHolder').style.height = "100%" ;
 document.getElementById('contentsHolder').style.backgroundColor = "rgba(0,0,0,1)" ;
 document.getElementById('informationText').innerHTML = "" ;
 //Load sandbox level
 setTimeout(function() {
   parent.loadLevel(0);
 }, 400);

} //end startSandbox

//startUtilities hides the startup page elements and displays utilities
function startUtilities() {
 
 //Hide startup page elements
 document.getElementById('button1').style.display = "none" ;
 document.getElementById('button2').style.display = "none" ;
 document.getElementById('button3').style.left = "50%" ;
 document.getElementById('button3').style.backgroundColor = "#003d4d" ;
 document.getElementById('contentsHolder').style.marginTop = "0px";
 document.getElementById('contentsHolder').style.top = "0%";
 document.getElementById('contentsHolder').style.height = "100%" ;
 document.getElementById('contentsHolder').style.backgroundColor = "rgba(0,0,0,1)" ;
 document.getElementById('informationText').innerHTML = "" ;
  
 //Display utilities elements
 setTimeout(function() {
  document.getElementById('dialogue').src = "utilities.html" ;
  document.getElementById('dialogue').style.visibility = "visible" ;
  setTimeout(function() { resetElements() ; }, 800);
  }, 400);
  
} //end startUtilities

//startPlay hides the startup page elements and displays the level selector
function startPlay() {
 
 //Hide startup page elements
 document.getElementById('button1').style.display = "none" ;
 document.getElementById('button3').style.display = "none" ;
 document.getElementById('button2').style.top = "40%" ;
 document.getElementById('button2').style.backgroundColor = "#003d4d" ;
 document.getElementById('contentsHolder').style.marginTop = "0px";
 document.getElementById('contentsHolder').style.top = "0%";
 document.getElementById('contentsHolder').style.height = "100%" ;
 document.getElementById('contentsHolder').style.backgroundColor = "rgba(0,0,0,1)" ;
 document.getElementById('informationText').innerHTML = "" ;
  
 //Display level selector
 setTimeout(function() {
  setTimeout(function() { resetElements() ; }, 800);
   document.getElementById('dialogue').src = "play.html" ; 
   document.getElementById('dialogue').style.visibility = "visible" ;
 }, 400) ;

} //end startPlay

//resetElements shows the elements of the startup page after reutrning to the page
function resetElements(){

 document.getElementById('button1').style.display = "block" ;
 document.getElementById('button2').style.display = "block" ;
 document.getElementById('button3').style.display = "block" ;
 document.getElementById('button1').style.backgroundColor = "#40A4DF" ;
 document.getElementById('button2').style.backgroundColor = "#40A4DF" ;
 document.getElementById('button3').style.backgroundColor = "#40A4DF" ;
 document.getElementById('button1').style.left = "25%" ;
 document.getElementById('button2').style.top = "50%" ;
 document.getElementById('button3').style.left = "75%" ;
 
} //end resetElements

//reset reactivates elements on the startup page
function reset() {
 
 document.activeElement.blur() ;
 
 document.getElementById('dialogue').src = "" ;
 document.getElementById('dialogue').style.visibility = "hidden" ;
  
 document.getElementById('contentsHolder').style.marginTop = "-200px";
 document.getElementById('contentsHolder').style.top = "50%";
 document.getElementById('contentsHolder').style.height = "400px" ;
 document.getElementById('contentsHolder').style.backgroundColor = "rgba(0,0,0,0)" ;
 
} //end reset

function recallMain(){
 resetElements() ;
 reset() ;
}

//highlightButton toggles the color of startup page buttons when hovered over
function highlightButton(value, on) {
  
   var string = "button" + value ;
   if(on){
      document.getElementById(string).style.backgroundColor = "#7cc1e9" ;
      var message = "";
      
      switch(value){
       case 1:
        message = "explore the watershed" ;
        break;
       case 2:
        message = "exercises and interaction" ;
        break;
       case 3:
        message = "extend the application" ;
        break;
      }
      
      document.getElementById('informationText').innerHTML = message;
   }
   else{
      document.getElementById('informationText').innerHTML = "" ;
      document.getElementById(string).style.backgroundColor = "#40A4DF" ;
   }
   
}

//createEnvironment creates scene generic THREE.js elements and loads textures
function createEnvironment(){
 
 parent.createThreeFramework();
 parent.initializeCamera();
 parent.initializeLighting();
 parent.setupHighlight();
 parent.loadingManager();
 var returned = parent.loadResources();
 
} //createEnvironment

</script>

</body>
</html>